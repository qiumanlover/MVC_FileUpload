function fileSelected(){document.getElementById("fileInfo").innerHTML="";for(var e=arguments.callee.caller.arguments[0]||e,n=e.srcElement||e.target,a=n.files.length,t=0;a>t;t++){var o=n.files[t],i=0;i=o.size>1073741824?(Math.round(100*o.size/1073741824)/100).toString()+"GB":o.size>1048576?(Math.round(100*o.size/1048576)/100).toString()+"MB":(Math.round(100*o.size/1024)/100).toString()+"KB";var s="<ul><li>Name: "+o.name+"</li><li>Size: "+i+"</li><li>Type: "+o.type+"</li></ul>";document.getElementById("fileInfo").innerHTML+=s}}function uploadWholeFile(e){var n=new FormData;n.append(e.name,e);var a=new XMLHttpRequest;a.open("POST","../Home/MyUpload",!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&console.log(a.responseText)},a.send(n)}function uploadFileByBlob(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var a=n.response.index;if(console.log(a/1024/1024+"    "+a),a<e.size){var t=a+pieceSize;t=t<e.size?t:e.size;var o=e.slice(a,t);n.open("post","../Home/TransferData",!0),n.responseType="json",n.send(o)}}};var a={filename:e.name,filesize:e.size};n.open("post","../Home/SetFileInfo",!0),n.responseType="json",n.send(JSON.stringify(a)),console.log(e.size)}function uploadFileByFormData(e){var n=Math.ceil(e.size/pieceSize),a=new XMLHttpRequest;a.responseType="json";var t=1,o=new FormData;o.append("filename",e.name),o.append("pieceCount",n),o.append("curPiece",t),o.append("data",e.slice((t-1)*pieceSize,t*pieceSize)),a.open("post","../Home/UploadByPiece",!0),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var i=a.response;console.log(i.nxtPiece),t=i.nxtPiece-1,t++,n>=t&&(o=new FormData,o.append("filename",e.name),o.append("pieceCount",n),o.append("curPiece",t),o.append("data",e.slice((t-1)*pieceSize,t*pieceSize)),a.open("post","../Home/UploadByPiece",!0),a.send(o))}},a.send(o)}function uploadFileNode(e){var n=new FormData;n.append(e.name,e);var a=new XMLHttpRequest;a.open("POST","http://localhost:3000",!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&console.log(a.responseText)},a.send(n)}function uploadfiles(){for(var e=$("#fileToUpload")[0].files,n=0;n<e.length;n++)uploadFileNode(e[n])}var pieceSize=1048576;